_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[39],{FdGL:function(e,a,n){"use strict";var o=n("6I9Z"),r=n("+Rjy"),t=n("kizA"),i=n("jdqL"),s=n("Fjxe"),u=n("q1tI"),l=n.n(u),c=n("QojX"),d=n("cWnB"),m=n("NKCw"),p=l.a.createElement;a.a=function(e){var a=e.title,n=e.items,u=e.permisosDisponibles,l=void 0===u?[]:u,b=e.rolesDisponibles,v=void 0===b?[]:b,f=e.personasDisponibles,h=void 0===f?[]:f,w=e.onSubmit,j=Object(m.e)().handleSubmit;return p("main",{className:"container-fluid"},p(o.a,{title:a,items:n}),p("div",{className:"row justify-content-center"},p("div",{className:"col-md-8 jumbotron rounded"},p("form",{onSubmit:j(w)},p(s.a,{name:"username",label:"Nombre de usuario:",rules:{required:"Este campo es obligatorio"}}),p(t.a,{name:"persona",label:"Persona",placeholder:"Seleccione una persona",optionLabel:"str",dataKey:"str",showClear:!0,options:h,filter:!0}),p(i.a,{label:"Roles:",name:"grupos",sourceHeader:"Roles Disponibles",targetHeader:"Roles de este Usuario",source:v,itemTemplate:function(e){return e.nombre},rules:{validate:function(e){return 0!==e.length||"Debe seleccionar al menos un rol para este usuario"}}}),p(i.a,{label:"Permisos:",name:"permisos",sourceHeader:"Permisos Disponibles",targetHeader:"Permisos de este Rol",source:l,itemTemplate:function(e){return e.nombre},rules:{validate:function(e){return 0!==e.length||"Debe seleccionar al menos un permiso"}}}),p(c.a.Row,{className:" justify-content-between"},p("div",{className:"col-md-5 mt-3 my-1"},p(r.a,{href:"/auth/usuarios",variant:"outline-danger"})),p("div",{className:"col-md-5 mt-3 my-1"},p(d.a,{variant:"outline-primary",block:!0,type:"submit"},"Guardar")))))))}},Ia3n:function(e,a,n){"use strict";n.r(a);var o=n("o0o1"),r=n.n(o),t=n("HaE+"),i=n("ODXe"),s=n("VX74"),u=n("FdGL"),l=n("Tq9W"),c=n("yp05"),d=n("nOHt"),m=n("q1tI"),p=n.n(m),b=n("NKCw"),v=p.a.createElement,f=function(e){var a,n,o=e.id,m=e.title,p=e.items,f=Object(b.d)({mode:"onChange"}),h=Object(d.useRouter)(),w=Object(s.useQuery)(c.c.getById,{variables:{id:o},onCompleted:function(e){var a=e.usuario;f.reset(a)}}),j=w.data,g=w.loading,N=Object(s.useMutation)(c.c.update),y=Object(i.a)(N,1)[0],O=function(){var e=Object(t.a)(r.a.mark((function e(a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.persona&&(a.persona=null===a||void 0===a||null===(n=a.persona)||void 0===n?void 0:n.id),a.permisos=a.permisos.map((function(e){return e.id})),a.grupos=a.grupos.map((function(e){return e.id})),e.next=5,y({variables:{id:o,input:a}});case 5:h.push("/auth/usuarios");case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return v(l.a,{title:"IPCA | Editar Usuario",loading:g},v(b.b,f,v(u.a,{title:m,items:p,onSubmit:O,permisosDisponibles:(null===j||void 0===j||null===(a=j.usuario)||void 0===a?void 0:a.permisosDisponibles)||[],rolesDisponibles:null===j||void 0===j||null===(n=j.usuario)||void 0===n?void 0:n.gruposDisponibles,personasDisponibles:null===j||void 0===j?void 0:j.personas})))};f.getInitialProps=function(e){var a=e.query;return{title:"Editar Usuario",id:a.id,items:[{title:"Usuarios",href:"/auth/usuarios"},{title:a.id,active:!0}]}},a.default=f},QnCy:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/usuarios/update",function(){return n("Ia3n")}])},kizA:function(e,a,n){"use strict";var o=n("wx14"),r=n("rePB"),t=n("Ff2n"),i=n("TSYQ"),s=n.n(i),u=n("sv1p"),l=n("q1tI"),c=n.n(l),d=n("QojX"),m=n("NKCw"),p=n("PK9Q"),b=c.a.createElement;a.a=function(e){var a=e.label,n=e.rules,i=e.name,l=e.onChange,c=e.placeholder,v=e.className,f=Object(t.a)(e,["label","rules","name","onChange","placeholder","className"]),h=Object(m.e)(),w=h.control,j=h.errors;return b(d.a.Group,null,b(d.a.Label,null,a),b(m.a,{name:i,control:w,rules:n,defaultValue:null,render:function(e){var a,n=e.onChange,t=e.value;return b(u.Dropdown,Object(o.a)({value:t,onChange:function(e){var a=e.value;n(a),l&&l(a)},placeholder:c||"Seleccione",className:s()((a={},Object(r.a)(a,v,!0),Object(r.a)(a,"w-100",!0),Object(r.a)(a,"p-invalid",!!j[i]),a))},f))}}),b(p.a,{name:i}))}},sv1p:function(e,a,n){"use strict";e.exports=n("YuXx")}},[["QnCy",1,2,3,0,4,5,6,7,8,9,14]]]);